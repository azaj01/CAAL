---
phase: 07-quality-verification
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: []
autonomous: false

must_haves:
  truths:
    - "No hardcoded English strings exist in target components"
    - "All three message files have identical key structure for Tools.share and Tools.workflow"
    - "French translations use tu/toi register consistently"
    - "UI displays correctly in EN, FR, and IT locales"
  artifacts:
    - path: "frontend/components/tools/workflow-submission-dialog.tsx"
      provides: "Internationalized submission dialog"
      contains: "useTranslations"
    - path: "frontend/components/tools/workflow-detail-modal.tsx"
      provides: "Internationalized detail modal"
      contains: "useTranslations"
    - path: "frontend/messages/en.json"
      provides: "English translations"
      contains: "Tools.share"
    - path: "frontend/messages/fr.json"
      provides: "French translations"
      contains: "Tools.share"
    - path: "frontend/messages/it.json"
      provides: "Italian translations"
      contains: "Tools.share"
  key_links:
    - from: "workflow-submission-dialog.tsx"
      to: "messages/*.json"
      via: "useTranslations('Tools')"
      pattern: "t\\('share\\."
    - from: "workflow-detail-modal.tsx"
      to: "messages/*.json"
      via: "useTranslations('Tools')"
      pattern: "t\\('workflow\\."
---

<objective>
Verify the i18n implementation for Tool Registry components is complete and consistent.

Purpose: Ensure all hardcoded strings have been extracted and translations are structurally identical across EN/FR/IT with consistent style.
Output: Verification report confirming QA-01, QA-02, QA-03 requirements are met.
</objective>

<execution_context>
@/Users/mmaudet/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mmaudet/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Target components:
@frontend/components/tools/workflow-submission-dialog.tsx
@frontend/components/tools/workflow-detail-modal.tsx

Message files:
@frontend/messages/en.json
@frontend/messages/fr.json
@frontend/messages/it.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify no hardcoded strings in components (QA-01)</name>
  <files>
    frontend/components/tools/workflow-submission-dialog.tsx
    frontend/components/tools/workflow-detail-modal.tsx
  </files>
  <action>
Search both target components for hardcoded English strings. A component passes QA-01 if:

1. It imports and uses `useTranslations` from 'next-intl'
2. All user-visible text uses `t('key')` or `tCommon('key')` patterns
3. No hardcoded strings like `"Submit"`, `"Cancel"`, `"Loading..."` remain outside of:
   - Type definitions (interface names, type literals)
   - CSS class names
   - Data attributes
   - Technical values (URLs, IDs)

Verification approach:
- Grep for quoted strings that look like UI text (capitalized words, sentences)
- Exclude: className, href, type, weight, key, target, rel attributes
- Exclude: Phosphor icon imports
- Exclude: Technical patterns (workflow.id, n8n, URL construction)

Document findings:
- List any hardcoded strings found (expected: none)
- List all t() and tCommon() calls found
- Confirm useTranslations import exists
  </action>
  <verify>
Run grep to find potential hardcoded strings:
```bash
# Look for quoted strings that might be UI text in target files
grep -n '"[A-Z][a-zA-Z ]*"' frontend/components/tools/workflow-submission-dialog.tsx frontend/components/tools/workflow-detail-modal.tsx | grep -v 'className\|href\|type=\|weight=\|key=\|target=\|rel=\|/ssr\|from\|import'
```
Expected: No UI-visible hardcoded strings (only technical values like "fill", "bold", CSS classes)
  </verify>
  <done>
Both components use useTranslations hook. Zero hardcoded UI strings remain. All user-visible text uses t() or tCommon() translation functions.
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify message file key structure parity (QA-03)</name>
  <files>
    frontend/messages/en.json
    frontend/messages/fr.json
    frontend/messages/it.json
  </files>
  <action>
Extract and compare the Tools.share and Tools.workflow key structures from all three message files.

Verification approach:
1. Extract Tools.share keys from en.json, fr.json, it.json
2. Extract Tools.workflow keys from en.json, fr.json, it.json
3. Compare key sets - must be identical across all three files
4. Report any missing or extra keys

Use jq or node to extract and compare keys:
```bash
# Extract Tools.share keys from each file
node -e "console.log(Object.keys(require('./frontend/messages/en.json').Tools.share).sort().join('\n'))"
node -e "console.log(Object.keys(require('./frontend/messages/fr.json').Tools.share).sort().join('\n'))"
node -e "console.log(Object.keys(require('./frontend/messages/it.json').Tools.share).sort().join('\n'))"

# Extract Tools.workflow keys from each file
node -e "console.log(Object.keys(require('./frontend/messages/en.json').Tools.workflow).sort().join('\n'))"
node -e "console.log(Object.keys(require('./frontend/messages/fr.json').Tools.workflow).sort().join('\n'))"
node -e "console.log(Object.keys(require('./frontend/messages/it.json').Tools.workflow).sort().join('\n'))"
```

Document findings:
- List of Tools.share.* keys (expected 13 keys)
- List of Tools.workflow.* keys (expected 11 keys)
- Any discrepancies between languages (expected: none)
  </action>
  <verify>
```bash
# Compare Tools.share keys across all files
diff <(node -e "console.log(Object.keys(require('./frontend/messages/en.json').Tools.share).sort().join('\n'))") \
     <(node -e "console.log(Object.keys(require('./frontend/messages/fr.json').Tools.share).sort().join('\n'))")

diff <(node -e "console.log(Object.keys(require('./frontend/messages/en.json').Tools.share).sort().join('\n'))") \
     <(node -e "console.log(Object.keys(require('./frontend/messages/it.json').Tools.share).sort().join('\n'))")

# Compare Tools.workflow keys across all files
diff <(node -e "console.log(Object.keys(require('./frontend/messages/en.json').Tools.workflow).sort().join('\n'))") \
     <(node -e "console.log(Object.keys(require('./frontend/messages/fr.json').Tools.workflow).sort().join('\n'))")

diff <(node -e "console.log(Object.keys(require('./frontend/messages/en.json').Tools.workflow).sort().join('\n'))") \
     <(node -e "console.log(Object.keys(require('./frontend/messages/it.json').Tools.workflow).sort().join('\n'))")
```
Expected: All diff commands produce no output (identical key sets)
  </verify>
  <done>
All three message files (EN/FR/IT) have identical key structures for Tools.share.* and Tools.workflow.* namespaces. Zero missing or extra keys.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Visual verification of UI in all locales (QA-02)</name>
  <what-built>
Automated verification confirmed:
- No hardcoded strings in target components
- Identical key structure across EN/FR/IT message files
- useTranslations hook properly wired

Now need human verification of:
- Translation style consistency
- UI displays correctly in all 3 languages
  </what-built>
  <how-to-verify>
1. Start the frontend dev server: `cd frontend && pnpm dev`

2. Open http://localhost:3000 in browser

3. **Test English (default):**
   - Click Tools icon in sidebar
   - Switch to "Installed Tools" tab (requires n8n configured)
   - If you have a custom workflow, click it to open the detail modal
   - Verify all text is in English, no missing translations (no key paths showing)

4. **Test French:**
   - Go to Settings -> Language -> French
   - Repeat the Tools flow
   - Verify:
     - "Partager au registre" button text
     - Dialog uses tu/toi register ("Tes secrets ne quittent jamais ton navigateur")
     - No English text leaking through
     - No missing translation keys visible

5. **Test Italian:**
   - Go to Settings -> Language -> Italian
   - Repeat the Tools flow
   - Verify:
     - "Condividi nel registro" button text
     - All labels translated
     - No English text leaking through
     - No missing translation keys visible

6. **Style consistency check:**
   - French should use informal "tu" (not "vous")
   - Technical terms (n8n, workflow, credentials, URL) should stay in English
   - Tone should match existing Settings translations
  </how-to-verify>
  <resume-signal>
Type "approved" if UI displays correctly in all 3 languages with consistent style.
If issues found, describe what's wrong and which language/component is affected.
  </resume-signal>
</task>

</tasks>

<verification>
Phase verification checklist:
- [ ] QA-01: Grep confirms no hardcoded UI strings in target components
- [ ] QA-03: Diff confirms identical key structure across EN/FR/IT
- [ ] QA-02: Human verified UI displays correctly in all 3 locales
- [ ] French uses tu/toi register consistently
- [ ] Technical terms remain in English across all translations
</verification>

<success_criteria>
1. Zero hardcoded English strings found in workflow-submission-dialog.tsx and workflow-detail-modal.tsx
2. Tools.share.* and Tools.workflow.* have identical keys in en.json, fr.json, it.json
3. User confirms UI renders correctly in English, French, and Italian
4. Translation style is consistent with existing messages (French tu/toi, technical terms in English)
</success_criteria>

<output>
After completion, create `.planning/phases/07-quality-verification/07-01-SUMMARY.md`
</output>
